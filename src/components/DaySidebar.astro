---
import FolderIcon from "./FolderIcon.astro";
import LockDay from "./LockDay.astro";
interface Item {
  title: String;
  link: String;
  frontmatter: any;
}
const { navItems } = Astro.props;
const {subNavItems} = Astro.props;
const subNavItemsSet = subNavItems.filter((item: Item)=>item.frontmatter.module != undefined)
---

<section class="sidebar">
  <h1>Learn the Web Notes</h1>

  <nav>
    <ul>
      <li><small>Navigation</small></li>
      {
        navItems.map((item: Item) => {
          return (

            <li>
              <a
                href="#"
              >
                <FolderIcon/>
                {item.frontmatter.title}

              </a>
              
              {subNavItems.length > 0?
                <ul class="subitems">
                   {subNavItemsSet.map((subItem: Item)=>{
                    if (subItem.frontmatter.day == item.frontmatter.day) 
                      return <li><a href={`/notes/${subItem.frontmatter.day}/${subItem.frontmatter.module}`}>{subItem.frontmatter.title}</a></li>
                   })}
                  </ul>
              : null}
            </li>
          );
        })
      }
    </ul>
  </nav>
</section>

<style>
  section.sidebar {
    background: #092033;
    padding: 1rem;
    width: 20rem;
    min-height: 100vh;
    position: relative;
  }

  section.sidebar small {
    color: #fff;
    font-weight: 100;
    text-transform: uppercase;
  }

  section.sidebar h1 {
    color: #fff;
    font-size: min(1rem, 5vw);
    font-weight: 300;
    margin: 0;
  }

  section.sidebar nav {
    margin-top: 2rem;
  }

  section.sidebar nav ul {
    padding: 0;
    margin: 0;
  }

  section ul li {
    list-style: none;
    margin: 1rem 0;
  }

  section ul li a {
    color: #fff;
    text-decoration: none;
    font-size: min(0.85rem, 5vw);
    font-weight: 400;
    text-transform: uppercase;
  }

  section ul li ul.subitems{
    margin-left:2rem;
  }
</style>
